{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GOX Metadata Collection Schema",
  "description": "Schema for GOX Framework metadata collection output",
  "type": "object",
  "properties": {
    "collection_metadata": {
      "type": "object",
      "properties": {
        "collection_id": {
          "type": "string",
          "description": "Unique identifier for the metadata collection"
        },
        "collected_at": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when metadata was collected"
        },
        "collector_version": {
          "type": "string",
          "description": "Version of the metadata collector agent"
        },
        "collection_scope": {
          "type": "string",
          "enum": ["basic", "standard", "comprehensive", "custom"],
          "description": "Scope of metadata collection performed"
        },
        "data_sources": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "source_id": {
                "type": "string"
              },
              "source_type": {
                "type": "string",
                "enum": ["file", "database", "api", "stream", "agent_output"]
              },
              "source_path": {
                "type": "string"
              },
              "last_modified": {
                "type": "string",
                "format": "date-time"
              },
              "size": {
                "type": "integer",
                "minimum": 0
              },
              "checksum": {
                "type": "string"
              }
            },
            "required": ["source_id", "source_type", "source_path"]
          },
          "description": "List of data sources from which metadata was collected"
        },
        "collection_duration": {
          "type": "number",
          "minimum": 0,
          "description": "Duration of collection process in milliseconds"
        }
      },
      "required": ["collection_id", "collected_at", "collection_scope"]
    },
    "system_metadata": {
      "type": "object",
      "properties": {
        "environment_info": {
          "type": "object",
          "properties": {
            "gox_version": {
              "type": "string"
            },
            "processing_node": {
              "type": "string"
            },
            "environment": {
              "type": "string",
              "enum": ["development", "testing", "staging", "production"]
            },
            "hostname": {
              "type": "string"
            },
            "operating_system": {
              "type": "string"
            },
            "architecture": {
              "type": "string"
            },
            "available_memory": {
              "type": "string"
            },
            "cpu_cores": {
              "type": "integer",
              "minimum": 1
            }
          }
        },
        "resource_usage": {
          "type": "object",
          "properties": {
            "cpu_utilization": {
              "type": "object",
              "properties": {
                "average": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                },
                "peak": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                },
                "samples": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      },
                      "value": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                      }
                    }
                  }
                }
              }
            },
            "memory_usage": {
              "type": "object",
              "properties": {
                "peak_usage": {
                  "type": "string"
                },
                "average_usage": {
                  "type": "string"
                },
                "allocation_pattern": {
                  "type": "string",
                  "enum": ["stable", "growing", "fluctuating", "declining"]
                },
                "gc_activity": {
                  "type": "object",
                  "properties": {
                    "gc_count": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "total_gc_time": {
                      "type": "number",
                      "minimum": 0
                    },
                    "average_gc_time": {
                      "type": "number",
                      "minimum": 0
                    }
                  }
                }
              }
            },
            "disk_io": {
              "type": "object",
              "properties": {
                "read_throughput": {
                  "type": "string"
                },
                "write_throughput": {
                  "type": "string"
                },
                "total_reads": {
                  "type": "integer",
                  "minimum": 0
                },
                "total_writes": {
                  "type": "integer",
                  "minimum": 0
                },
                "io_wait_time": {
                  "type": "number",
                  "minimum": 0
                }
              }
            },
            "network_io": {
              "type": "object",
              "properties": {
                "bytes_received": {
                  "type": "integer",
                  "minimum": 0
                },
                "bytes_sent": {
                  "type": "integer",
                  "minimum": 0
                },
                "connection_count": {
                  "type": "integer",
                  "minimum": 0
                },
                "error_rate": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                }
              }
            }
          }
        }
      }
    },
    "processing_metadata": {
      "type": "object",
      "properties": {
        "pipeline_info": {
          "type": "object",
          "properties": {
            "pipeline_id": {
              "type": "string"
            },
            "pipeline_type": {
              "type": "string",
              "enum": ["analysis", "workflow", "reporting", "mixed"]
            },
            "start_time": {
              "type": "string",
              "format": "date-time"
            },
            "end_time": {
              "type": "string",
              "format": "date-time"
            },
            "total_duration": {
              "type": "number",
              "minimum": 0,
              "description": "Total pipeline duration in milliseconds"
            },
            "status": {
              "type": "string",
              "enum": ["running", "completed", "failed", "aborted"]
            }
          },
          "required": ["pipeline_id", "start_time", "status"]
        },
        "agent_statistics": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "agent_id": {
                "type": "string"
              },
              "agent_type": {
                "type": "string"
              },
              "messages_processed": {
                "type": "integer",
                "minimum": 0
              },
              "messages_produced": {
                "type": "integer",
                "minimum": 0
              },
              "processing_time": {
                "type": "number",
                "minimum": 0,
                "description": "Total processing time in milliseconds"
              },
              "average_message_time": {
                "type": "number",
                "minimum": 0,
                "description": "Average time per message in milliseconds"
              },
              "success_count": {
                "type": "integer",
                "minimum": 0
              },
              "error_count": {
                "type": "integer",
                "minimum": 0
              },
              "warning_count": {
                "type": "integer",
                "minimum": 0
              },
              "throughput": {
                "type": "number",
                "minimum": 0,
                "description": "Messages per second"
              },
              "resource_usage": {
                "type": "object",
                "properties": {
                  "cpu_time": {
                    "type": "number",
                    "minimum": 0
                  },
                  "memory_peak": {
                    "type": "string"
                  },
                  "disk_reads": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "disk_writes": {
                    "type": "integer",
                    "minimum": 0
                  }
                }
              }
            },
            "required": ["agent_id", "agent_type", "messages_processed"]
          }
        },
        "communication_patterns": {
          "type": "object",
          "properties": {
            "message_flow": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "from_agent": {
                    "type": "string"
                  },
                  "to_agent": {
                    "type": "string"
                  },
                  "message_count": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "total_bytes": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "average_latency": {
                    "type": "number",
                    "minimum": 0
                  }
                }
              }
            },
            "bottlenecks": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "agent_id": {
                    "type": "string"
                  },
                  "bottleneck_type": {
                    "type": "string",
                    "enum": ["throughput", "latency", "memory", "cpu", "io"]
                  },
                  "severity": {
                    "type": "string",
                    "enum": ["low", "medium", "high", "critical"]
                  },
                  "description": {
                    "type": "string"
                  },
                  "impact": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "data_provenance": {
      "type": "object",
      "properties": {
        "lineage_tracking": {
          "type": "object",
          "properties": {
            "source_files": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "file_path": {
                    "type": "string"
                  },
                  "original_location": {
                    "type": "string"
                  },
                  "ingestion_time": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "file_hash": {
                    "type": "string"
                  },
                  "file_size": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "mime_type": {
                    "type": "string"
                  }
                },
                "required": ["file_path", "ingestion_time", "file_hash"]
              }
            },
            "transformation_chain": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "step_id": {
                    "type": "string"
                  },
                  "agent_id": {
                    "type": "string"
                  },
                  "operation": {
                    "type": "string"
                  },
                  "input_data": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "output_data": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "timestamp": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "configuration": {
                    "type": "object",
                    "description": "Configuration used for this transformation step"
                  }
                },
                "required": ["step_id", "agent_id", "operation", "timestamp"]
              }
            },
            "data_dependencies": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "dependent_output": {
                    "type": "string"
                  },
                  "required_inputs": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "dependency_type": {
                    "type": "string",
                    "enum": ["direct", "indirect", "conditional"]
                  }
                }
              }
            }
          }
        },
        "quality_metrics": {
          "type": "object",
          "properties": {
            "data_integrity": {
              "type": "object",
              "properties": {
                "checksum_validation": {
                  "type": "string",
                  "enum": ["passed", "failed", "not_performed"]
                },
                "format_validation": {
                  "type": "string",
                  "enum": ["passed", "failed", "not_performed"]
                },
                "schema_compliance": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                }
              }
            },
            "completeness": {
              "type": "object",
              "properties": {
                "expected_records": {
                  "type": "integer",
                  "minimum": 0
                },
                "actual_records": {
                  "type": "integer",
                  "minimum": 0
                },
                "completeness_percentage": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                },
                "missing_fields": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "accuracy": {
              "type": "object",
              "properties": {
                "validation_rules_passed": {
                  "type": "integer",
                  "minimum": 0
                },
                "validation_rules_failed": {
                  "type": "integer",
                  "minimum": 0
                },
                "accuracy_score": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                },
                "outliers_detected": {
                  "type": "integer",
                  "minimum": 0
                }
              }
            },
            "timeliness": {
              "type": "object",
              "properties": {
                "data_freshness": {
                  "type": "string",
                  "description": "How recent the data is"
                },
                "processing_latency": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Time from data arrival to processing completion"
                },
                "sla_compliance": {
                  "type": "boolean",
                  "description": "Whether processing met SLA requirements"
                }
              }
            }
          }
        }
      }
    },
    "operational_metadata": {
      "type": "object",
      "properties": {
        "configuration_snapshot": {
          "type": "object",
          "properties": {
            "cell_configurations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "cell_id": {
                    "type": "string"
                  },
                  "configuration": {
                    "type": "object",
                    "description": "Complete cell configuration"
                  },
                  "config_hash": {
                    "type": "string"
                  }
                }
              }
            },
            "agent_configurations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "agent_id": {
                    "type": "string"
                  },
                  "agent_type": {
                    "type": "string"
                  },
                  "configuration": {
                    "type": "object"
                  },
                  "config_hash": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "security_metadata": {
          "type": "object",
          "properties": {
            "access_controls": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "resource": {
                    "type": "string"
                  },
                  "permissions": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "principals": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "encryption_status": {
              "type": "object",
              "properties": {
                "data_at_rest": {
                  "type": "boolean"
                },
                "data_in_transit": {
                  "type": "boolean"
                },
                "encryption_algorithms": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "audit_trail": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "timestamp": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "event_type": {
                    "type": "string"
                  },
                  "actor": {
                    "type": "string"
                  },
                  "resource": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string"
                  },
                  "outcome": {
                    "type": "string",
                    "enum": ["success", "failure", "error"]
                  }
                },
                "required": ["timestamp", "event_type", "actor", "action", "outcome"]
              }
            }
          }
        }
      }
    }
  },
  "required": ["collection_metadata", "system_metadata", "processing_metadata"]
}